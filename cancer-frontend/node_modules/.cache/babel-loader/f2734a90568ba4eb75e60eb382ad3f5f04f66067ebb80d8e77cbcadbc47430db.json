{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Card,CardContent,CardHeader,CardTitle}from'./ui/card';import{PieChart,Pie,BarChart,Bar,XAxis,YAxis,Tooltip,ResponsiveContainer}from'recharts';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[projects,setProjects]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchProjects();},[]);const fetchProjects=async()=>{try{const response=await axios.get('http://localhost:3001/api/projects');setProjects(response.data);setLoading(false);}catch(error){console.error('Error fetching projects:',error);setLoading(false);}};const calculateStats=()=>{const activeProjects=projects.filter(p=>p.status!=='Completed').length;const averageDuration=projects.reduce((sum,p)=>sum+(new Date(p.end_date)-new Date(p.start_date))/(1000*60*60*24),0)/projects.length;const overdueProjects=projects.filter(p=>new Date(p.end_date)<new Date()&&p.status!=='Completed').length;const completionRate=projects.filter(p=>p.status==='Completed').length/projects.length*100;return{activeProjects,averageDuration,overdueProjects,completionRate};};const prepareChartData=()=>{const statusCounts=projects.reduce((acc,project)=>{acc[project.status]=(acc[project.status]||0)+1;return acc;},{});const pillarCounts=projects.reduce((acc,project)=>{acc[project.parent_pillar]=(acc[project.parent_pillar]||0)+1;return acc;},{});return{statusData:Object.entries(statusCounts).map(_ref=>{let[name,value]=_ref;return{name,value};}),pillarData:Object.entries(pillarCounts).map(_ref2=>{let[name,value]=_ref2;return{name,value};})};};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading dashboard...\"});const stats=calculateStats();const chartData=prepareChartData();return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\",children:[/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(CardTitle,{children:\"Active Projects\"})}),/*#__PURE__*/_jsx(CardContent,{children:stats.activeProjects})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(CardTitle,{children:\"Average Duration\"})}),/*#__PURE__*/_jsxs(CardContent,{children:[stats.averageDuration.toFixed(1),\" days\"]})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(CardTitle,{children:\"Overdue Projects\"})}),/*#__PURE__*/_jsx(CardContent,{children:stats.overdueProjects})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(CardTitle,{children:\"Completion Rate\"})}),/*#__PURE__*/_jsxs(CardContent,{children:[stats.completionRate.toFixed(1),\"%\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(CardTitle,{children:\"Project Status Distribution\"})}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{data:chartData.statusData,dataKey:\"value\",nameKey:\"name\",fill:\"#8884d8\",label:true}),/*#__PURE__*/_jsx(Tooltip,{})]})})})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(CardTitle,{children:\"Projects by Parent Pillar\"})}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:chartData.pillarData,children:[/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"value\",fill:\"#82ca9d\"})]})})})]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","axios","Card","CardContent","CardHeader","CardTitle","PieChart","Pie","BarChart","Bar","XAxis","YAxis","Tooltip","ResponsiveContainer","jsx","_jsx","jsxs","_jsxs","Dashboard","projects","setProjects","loading","setLoading","fetchProjects","response","get","data","error","console","calculateStats","activeProjects","filter","p","status","length","averageDuration","reduce","sum","Date","end_date","start_date","overdueProjects","completionRate","prepareChartData","statusCounts","acc","project","pillarCounts","parent_pillar","statusData","Object","entries","map","_ref","name","value","pillarData","_ref2","children","stats","chartData","className","toFixed","width","height","dataKey","nameKey","fill","label"],"sources":["C:/Users/jacks/Desktop/Apps/cancer/cancer-frontend/src/components/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Card, CardContent, CardHeader, CardTitle } from './ui/card';\nimport { PieChart, Pie, BarChart, Bar, XAxis, YAxis, Tooltip, ResponsiveContainer } from 'recharts';\n\nconst Dashboard = () => {\n  const [projects, setProjects] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchProjects();\n  }, []);\n\n  const fetchProjects = async () => {\n    try {\n      const response = await axios.get('http://localhost:3001/api/projects');\n      setProjects(response.data);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching projects:', error);\n      setLoading(false);\n    }\n  };\n\n  const calculateStats = () => {\n    const activeProjects = projects.filter(p => p.status !== 'Completed').length;\n    const averageDuration = projects.reduce((sum, p) => sum + (new Date(p.end_date) - new Date(p.start_date)) / (1000 * 60 * 60 * 24), 0) / projects.length;\n    const overdueProjects = projects.filter(p => new Date(p.end_date) < new Date() && p.status !== 'Completed').length;\n    const completionRate = (projects.filter(p => p.status === 'Completed').length / projects.length) * 100;\n\n    return { activeProjects, averageDuration, overdueProjects, completionRate };\n  };\n\n  const prepareChartData = () => {\n    const statusCounts = projects.reduce((acc, project) => {\n      acc[project.status] = (acc[project.status] || 0) + 1;\n      return acc;\n    }, {});\n\n    const pillarCounts = projects.reduce((acc, project) => {\n      acc[project.parent_pillar] = (acc[project.parent_pillar] || 0) + 1;\n      return acc;\n    }, {});\n\n    return {\n      statusData: Object.entries(statusCounts).map(([name, value]) => ({ name, value })),\n      pillarData: Object.entries(pillarCounts).map(([name, value]) => ({ name, value }))\n    };\n  };\n\n  if (loading) return <div>Loading dashboard...</div>;\n\n  const stats = calculateStats();\n  const chartData = prepareChartData();\n\n  return (\n    <div className=\"dashboard\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Active Projects</CardTitle>\n          </CardHeader>\n          <CardContent>{stats.activeProjects}</CardContent>\n        </Card>\n        <Card>\n          <CardHeader>\n            <CardTitle>Average Duration</CardTitle>\n          </CardHeader>\n          <CardContent>{stats.averageDuration.toFixed(1)} days</CardContent>\n        </Card>\n        <Card>\n          <CardHeader>\n            <CardTitle>Overdue Projects</CardTitle>\n          </CardHeader>\n          <CardContent>{stats.overdueProjects}</CardContent>\n        </Card>\n        <Card>\n          <CardHeader>\n            <CardTitle>Completion Rate</CardTitle>\n          </CardHeader>\n          <CardContent>{stats.completionRate.toFixed(1)}%</CardContent>\n        </Card>\n      </div>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Project Status Distribution</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <PieChart>\n                <Pie data={chartData.statusData} dataKey=\"value\" nameKey=\"name\" fill=\"#8884d8\" label />\n                <Tooltip />\n              </PieChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader>\n            <CardTitle>Projects by Parent Pillar</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <BarChart data={chartData.pillarData}>\n                <XAxis dataKey=\"name\" />\n                <YAxis />\n                <Tooltip />\n                <Bar dataKey=\"value\" fill=\"#82ca9d\" />\n              </BarChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}